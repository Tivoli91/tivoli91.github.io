<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Windows PowerShell Special -- Hexo+Gitee 搭建个人博客 -- 我这个博客是怎么搭起来的"><meta name="keywords" content="gitee,blog,markdown"><meta name="author" content="超速蜗牛,undefined"><meta name="copyright" content="超速蜗牛"><title>Windows PowerShell Special -- Hexo+Gitee 搭建个人博客 -- 我这个博客是怎么搭起来的【超速蜗牛的博客】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!-- link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!-- link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!-- script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"AOHMI93W80","apiKey":"3f74c7e8113768c69c3eedfd6540618f","indexName":"hexo","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#概述"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#依赖条件"><span class="toc-number">2.</span> <span class="toc-text">依赖条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装Chocolatey-Node-js-Git"><span class="toc-number">3.</span> <span class="toc-text">安装Chocolatey/Node.js/Git</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装cnpm"><span class="toc-number">4.</span> <span class="toc-text">安装cnpm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装hexo"><span class="toc-number">5.</span> <span class="toc-text">安装hexo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化一个新的hexo博客"><span class="toc-number">6.</span> <span class="toc-text">初始化一个新的hexo博客</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加分类-标签-关于"><span class="toc-number">7.</span> <span class="toc-text">添加分类/标签/关于</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#添加分类"><span class="toc-number">7.1.</span> <span class="toc-text">添加分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加标签"><span class="toc-number">7.2.</span> <span class="toc-text">添加标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加关于"><span class="toc-number">7.3.</span> <span class="toc-text">添加关于</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装主题"><span class="toc-number">8.</span> <span class="toc-text">安装主题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装看板娘"><span class="toc-number">9.</span> <span class="toc-text">安装看板娘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#推送到码云"><span class="toc-number">10.</span> <span class="toc-text">推送到码云</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#新建私有仓库"><span class="toc-number">10.1.</span> <span class="toc-text">新建私有仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSH秘钥设置"><span class="toc-number">10.2.</span> <span class="toc-text">SSH秘钥设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#推送hexo文件到码云并启动Gitee-Pages-服务"><span class="toc-number">10.3.</span> <span class="toc-text">推送hexo文件到码云并启动Gitee Pages 服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#后续"><span class="toc-number">11.</span> <span class="toc-text">后续</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新"><span class="toc-number">12.</span> <span class="toc-text">更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Markdown图片居中并添加标题"><span class="toc-number">12.1.</span> <span class="toc-text">Markdown图片居中并添加标题</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">超速蜗牛</div><div class="author-info-description">Learn PowerShell.</div><div class="links-buttons"><a class="links-button button-hover" href="https://gitee.com/chaoyuew" target="_blank">Gitee<i class="icon-dot bg-color8"></i></a><a class="links-button button-hover" href="mailto:348001390@qq.com" target="_blank">E-Mail<i class="icon-dot bg-color5"></i></a><a class="links-button button-hover" href="tencent://message/?uin=348001390&amp;Site=&amp;Menu=yes" target="_blank">QQ<i class="icon-dot bg-color9"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">35</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">44</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">2</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> 搜索</span></a><a class="title-name" href="/">超速蜗牛的博客</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">Windows PowerShell Special -- Hexo+Gitee 搭建个人博客 -- 我这个博客是怎么搭起来的</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2019-08-14 | 更新于 2019-08-26</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/powershell/">powershell</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/powershell/hexo/">hexo</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/gitee/">gitee</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/blog/">blog</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/markdown/">markdown</a></div></div></div><div class="main-content"><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>当你访问我现在这个博客的时候,有没有想过自己也搭建一个类似的blog? 可是又怕步骤太多?技术太难?<br>没关系,这篇文章会一步一步的教你,并且文末会针对懒癌患者给出一个一键安装的脚本.</p>
<p>我先说下主体框架: 我是最终选择了Gitee(码云) + Hexo + Fan主题 来搭建的. </p>
<p>没用github的原因是因为国内访问太慢了,考虑到我的博客主要还是面向国内的网友,所以选择了gitee,这个我觉得是在目前国内做的最好的git平台,从我微信公众号过来的网友应该知道我的powershell代码都是放在这的. 而且本身码云支持hexo静态网站服务,详细见<a href="https://gitee.com/help/articles/4136" target="_blank" rel="noopener">码云Pages</a>.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zl5ss8f9j30lo05hglo.jpg"><br><div>1-码云支持静态网站的服务</div></center>

<a id="more"></a>

<p>而选择hexo没有使用hugo是因为觉得hexo的生态更好吧,出了问题,网上解决资源较多. 当时我也看了下hugo,这个本身搭建是比hexo简单的. 还在于你自己个人喜好吧.相信本文看完了,你自己也可以搭一个hugo博客.</p>
<p>Hexo我想可能有些小伙伴还是很陌生的,其实我也一样,当时我打算从公众号转移到博客的时候,我根本就不知道有hexo,当时是打算用WordPress或者直接开源中国博客之类的. 后来上网了解了下,看了下相关大佬的搭建视频,决定就用它了.Hexo的详细信息请移步官网<a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a></p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zlfitbvgj30vt0hwdgv.jpg"><br><div>2-hexo 博客概览</div></center>

<p>至于主题我没有使用用的最多的Next,而是使用了<a href="https://github.com/fan-lv/Fan" target="_blank" rel="noopener">Fan</a>这个主题,因为感觉太对我个人的胃口了, 下面教程也是基于这个主题的安装,你也可以看下hexo安装的<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">官方教程</a>.</p>
<h3 id="依赖条件"><a href="#依赖条件" class="headerlink" title="依赖条件"></a>依赖条件</h3><p>本文教程针对Windows操作系统,我自己是Win10的,相信Win7应该一样的, 推荐使用Chrome浏览器以达到最佳视觉效果,全程安装使用powershell脚本,必须在Administrator下运行,推荐使用powershell_ise来运行脚本.</p>
<p>如果你是第一次使用powershell,请确保ExecutionPolicy不是<code>Restricted</code>,否则请先手动更改为<code>RemoteSigned</code>.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zoqnf15zj313s07faak.jpg"><br><div>3-更改powershell运行policy</div></center>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; <span class="built_in">Get-ExecutionPolicy</span></span><br><span class="line">Restricted</span><br><span class="line"></span><br><span class="line">PS C:\Windows\system32&gt; <span class="built_in">Set-ExecutionPolicy</span> -ExecutionPolicy RemoteSigned -Scope CurrentUser</span><br></pre></td></tr></table></figure>

<p>下面是我的脚本本地从零开始安装直到主题看板娘等全部搞定的一个基本雏形. 文末有代码地址,因为要下载各种包和依赖你自己的网速,实际脚本可能会运行数分钟.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g60wzkvgyej31680u0nh4.jpg"><br><div>4-powershell脚本安装hexo</div></center>


<p>安装 Hexo 相当简单. 然而在安装前,您必须检查电脑中是否已安装下列应用程序：</p>
<ul>
<li>Node.js (Should be at least nodejs 6.9)</li>
<li>Git</li>
</ul>
<p>是不是觉得很麻烦,怎么又要装这些软件,是不是不想看下去了, 放心我自己就是个懒人,我的教程肯定是能让脚本动手,就绝不自己动手.</p>
<p>这里我要使用另一个神奇的工具<a href="https://chocolatey.org/" target="_blank" rel="noopener">Chocolatey</a>,接触过的肯定知道有多好用了. 我们要使用它来自动化安装上面2个软件.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zlrfdl47j30n3037t8x.jpg"><br><div>5-Chocolatey</div></center>

<p>看到这里是不是又觉得很烦了,怎么又多出来一个软件,放心官方已经提供了脚本安装的方法,这也是我为什么要用这个软件的另一个原因.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zlwubpd7j31b5063mxn.jpg"><br><div>6-使用powershell安装Chocolatey</div></center>

<p>这个软件安装好后,再安装Git和Node.js就很简单了.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">choco install nodejs.install -y --force</span><br><span class="line">choco install git.install -y --force</span><br></pre></td></tr></table></figure>

<h3 id="安装Chocolatey-Node-js-Git"><a href="#安装Chocolatey-Node-js-Git" class="headerlink" title="安装Chocolatey/Node.js/Git"></a>安装Chocolatey/Node.js/Git</h3><p>我们在外面套一层powershell的脚本,加点判断条件:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-ExecutionPolicy</span> Bypass -Scope <span class="keyword">Process</span> -Force</span><br><span class="line"></span><br><span class="line"><span class="variable">$log</span> = <span class="string">"<span class="variable">$PSScriptRoot</span>\&#123;0:yyyy-MM-dd-HH-mm-ss&#125;-install-hexo.log"</span> -f (<span class="built_in">Get-Date</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable">$node</span> = &#123;<span class="keyword">Try</span>&#123;<span class="variable">$temp</span> = (node -v <span class="number">2</span>&gt;<span class="literal">$null</span>) ;<span class="variable">$temp</span> = <span class="variable">$temp</span> -inotmatch <span class="string">"^v"</span> -or <span class="variable">$temp</span> <span class="nomarkup">-lt</span> <span class="string">"v06.9"</span>; &#125;Catch&#123;<span class="variable">$temp</span> = <span class="literal">$true</span>&#125; ; <span class="keyword">return</span> <span class="variable">$temp</span>&#125;</span><br><span class="line"><span class="variable">$git</span> = &#123;<span class="keyword">Try</span>&#123;<span class="variable">$temp</span> = (git --version <span class="number">2</span>&gt;<span class="literal">$null</span>) -inotmatch <span class="string">"^git version"</span>&#125;Catch&#123;<span class="variable">$temp</span> = <span class="literal">$true</span>&#125; ; <span class="keyword">return</span> <span class="variable">$temp</span>&#125;</span><br><span class="line"><span class="variable">$choco</span> = &#123;<span class="keyword">Try</span>&#123;<span class="variable">$temp</span> = (choco -v <span class="number">2</span>&gt;<span class="literal">$null</span>) <span class="nomarkup">-eq</span> <span class="literal">$null</span>&#125;Catch&#123;<span class="variable">$temp</span> = <span class="literal">$true</span>&#125; ; <span class="keyword">return</span> <span class="variable">$temp</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span>( (icm <span class="variable">$node</span>) -or (icm <span class="variable">$git</span>))&#123; <span class="comment"># node/git之一或者都没装</span></span><br><span class="line">	<span class="keyword">If</span>( icm <span class="variable">$choco</span> )&#123; <span class="comment"># 查看是否安装了chocolatey, 没有的话</span></span><br><span class="line">		<span class="comment">#&lt;---------------------------------------------------- 1. 安装 chocolatey</span></span><br><span class="line">		<span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install chocolatey, please wait a while..."</span></span><br><span class="line">		iex ((<span class="built_in">New-Object</span> System.Net.WebClient).DownloadString(<span class="string">'https://chocolatey.org/install.ps1'</span>)) <span class="number">1</span>&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">		<span class="keyword">If</span>( icm <span class="variable">$choco</span> )&#123;<span class="comment"># 查看chocolatey有没有装成功</span></span><br><span class="line">			<span class="built_in">write-error</span> <span class="string">"Failed to install chocolatey, please check the console output/log(<span class="variable">$log</span>) or manually install chocolatey by yourself"</span></span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">If</span>( icm <span class="variable">$node</span> )&#123; <span class="comment">#查看是否安装了nodejs, 没有的话</span></span><br><span class="line">		<span class="comment">#&lt;---------------------------------------------------- 2. 安装 nodejs</span></span><br><span class="line">		<span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install nodejs, please wait a while..."</span></span><br><span class="line">		choco install nodejs.install -y --force <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">		<span class="comment"># 更新环境变量</span></span><br><span class="line">		<span class="variable">$env:Path</span> = [System.Environment]::GetEnvironmentVariable(<span class="string">"Path"</span>,<span class="string">"Machine"</span>) + <span class="string">";"</span> + [System.Environment]::GetEnvironmentVariable(<span class="string">"Path"</span>,<span class="string">"User"</span>)</span><br><span class="line">		<span class="keyword">If</span>( icm <span class="variable">$node</span>)&#123; <span class="comment"># 查看nodejs有没有装成功</span></span><br><span class="line">			<span class="built_in">write-error</span> <span class="string">"Failed to install nodejs, please check the console output/log(<span class="variable">$log</span>) or manually install nodejs by yourself"</span></span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">If</span>( icm <span class="variable">$git</span> )&#123; <span class="comment">#查看是否安装了git, 没有的话</span></span><br><span class="line">		<span class="comment">#&lt;---------------------------------------------------- 3. 安装 git, 用来向github或者gitee部署</span></span><br><span class="line">		<span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install git, please wait a while..."</span></span><br><span class="line">		choco install git.install -y --force <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">		<span class="comment"># 更新环境变量</span></span><br><span class="line">		<span class="variable">$env:Path</span> = [System.Environment]::GetEnvironmentVariable(<span class="string">"Path"</span>,<span class="string">"Machine"</span>) + <span class="string">";"</span> + [System.Environment]::GetEnvironmentVariable(<span class="string">"Path"</span>,<span class="string">"User"</span>)</span><br><span class="line">		<span class="keyword">If</span>( icm <span class="variable">$git</span>)&#123; <span class="comment"># 查看git有没有装成功</span></span><br><span class="line">			<span class="built_in">write-error</span> <span class="string">"Failed to install nodejs, please check the console output/log(<span class="variable">$log</span>) or manually install nodejs by yourself"</span></span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="安装cnpm"><a href="#安装cnpm" class="headerlink" title="安装cnpm"></a>安装cnpm</h3><p>国内npm安装插件会很慢,我们可以使用淘宝镜像来加速,安装好了后,我们以后安装插件,都使用<code>cnpm</code>安装.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> = &#123;<span class="keyword">Try</span>&#123;<span class="variable">$temp</span> = <span class="string">"registry=https://r.npm.taobao.org"</span> -inotin (cnpm -v <span class="number">2</span>&gt;<span class="literal">$null</span>)&#125;Catch&#123;<span class="variable">$temp</span> = <span class="literal">$true</span>&#125; ; <span class="keyword">return</span> <span class="variable">$temp</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span>( icm <span class="variable">$cnpm</span> )&#123; <span class="comment">#查看是否安装了cnpm, 没有的话</span></span><br><span class="line">	<span class="comment">#&lt;---------------------------------------------------- 4. npm太慢，安装cnpm淘宝镜像替代</span></span><br><span class="line">	<span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install cnpm, please wait a while..."</span></span><br><span class="line">	npm install -g cnpm --registry=https://registry.npm.taobao.org <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>OK,终于到了安装hexo的阶段了,也是很简单的命令,看下代码就清楚了,不过多解释.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env:Path</span> = [System.Environment]::GetEnvironmentVariable(<span class="string">"Path"</span>,<span class="string">"Machine"</span>) + <span class="string">";"</span> + [System.Environment]::GetEnvironmentVariable(<span class="string">"Path"</span>,<span class="string">"User"</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable">$hexo</span> = &#123;<span class="keyword">Try</span>&#123;<span class="variable">$temp</span> = (((hexo -v <span class="number">2</span>&gt;<span class="literal">$null</span>).tostring()) <span class="nomarkup">-eq</span> <span class="literal">$null</span>)&#125;Catch&#123;<span class="variable">$temp</span> = <span class="literal">$true</span>&#125; ; <span class="keyword">return</span> <span class="variable">$temp</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span>(icm <span class="variable">$hexo</span>)&#123; <span class="comment">#查看是否安装了hexo, 没有的话</span></span><br><span class="line">	<span class="comment">#&lt;---------------------------------------------------- 5. 安装 hexo</span></span><br><span class="line">	<span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install hexo, please wait a while..."</span></span><br><span class="line">	cnpm install -g hexo <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">	<span class="keyword">If</span>( icm <span class="variable">$hexo</span>)&#123; <span class="comment"># 查看hexo有没有装成功</span></span><br><span class="line">		<span class="built_in">write-error</span> <span class="string">"Failed to install hexo, please check the console output/log(<span class="variable">$log</span>) or manually install hexo by yourself"</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="初始化一个新的hexo博客"><a href="#初始化一个新的hexo博客" class="headerlink" title="初始化一个新的hexo博客"></a>初始化一个新的hexo博客</h3><p>hexo在本地编译的时候需要指定一个<code>空文件夹</code>,你从网上下的各种资源,插件,主题等以及你写的文章和最终编译的静态页面的文件都是保存在这个文件夹里. 因此你需要选好一个文件夹,以后轻易不能改动了,甚至重命名这个文件夹都可能会影响博客的效果.</p>
<p>本文下面的命令必须在 powershell切换到 hexo 主文件夹下运行才行, 我的最终的脚本是默认在你的documents文件夹下的hexo文件夹.<br>$hexo_folder = “$HOME\documents\hexo”</p>
<p>第一次安装hexo并运行的时候需要做3件事</p>
<ul>
<li>hexo init : 初始化文件,这个步骤会把github上的hexo文件copy到你指定的空文件下面</li>
<li>hexo g : 使用hexo初始化的文件生成第一个静态页面</li>
<li>hexo s : 启动nodejs service</li>
</ul>
<p>如果是第一次安装nodejs,应该会跳出来这么一个窗口,选择相应的网络类型,点击”Allow Access”就行了.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zq7uk7gij30fo0fg3z6.jpg"><br><div>7-nodejs访问网络</div></center>

<p>这3步没问题的话就可以在浏览器里面访问你的第一个hexo博客了(<code>http://localhost:4000/</code>), 我们依旧使用powershell对上面的命令进行简单的包装下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#************************ 下面的命令必须在 powershell切换到 hexo 主文件夹下运行 *****************************</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 6. 指定一个folder初始化 hexo,以后hexo的文件配置等都在这个文件夹下</span></span><br><span class="line"><span class="keyword">Try</span>&#123;</span><br><span class="line">	<span class="variable">$error</span>.clear()</span><br><span class="line">	mkdir <span class="variable">$hexo_folder</span> -force -ea <span class="number">1</span></span><br><span class="line">&#125;Catch&#123;</span><br><span class="line">	<span class="keyword">If</span>( <span class="variable">$_</span> -imatch <span class="string">"访问被拒绝|access.*denied"</span> )&#123;</span><br><span class="line">		<span class="variable">$_</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;<span class="keyword">Finally</span>&#123;&#125;</span><br><span class="line"><span class="keyword">If</span>( !(<span class="built_in">test-path</span> <span class="variable">$hexo_folder</span>) )&#123;</span><br><span class="line">	<span class="variable">$error</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">cd <span class="variable">$hexo_folder</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to initilize hexo in folder <span class="variable">$hexo_folder</span>, please wait a while..."</span></span><br><span class="line">hexo init</span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 7. 生成博客需要的文件</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to generate hexo blog website files, please wait a while..."</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 8. 启动本地service</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start nodejs service to validate hexo blog website, please wait a while..."</span></span><br><span class="line">start cmd -ArgumentList <span class="string">"/c `"hexo s`""</span></span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 9. 验证本地服务是否正常起来</span></span><br><span class="line"><span class="keyword">Try</span>&#123;</span><br><span class="line">	sleep <span class="number">10</span></span><br><span class="line">	<span class="variable">$hexo_validate</span> =<span class="built_in">Invoke-WebRequest</span> <span class="string">"http://localhost:4000/"</span> -Method Head -UseBasicParsing -ea <span class="number">4</span></span><br><span class="line">	<span class="keyword">If</span>( <span class="variable">$hexo_validate</span>.StatusCode <span class="nomarkup">-eq</span> <span class="number">200</span> )&#123;</span><br><span class="line">		<span class="built_in">read-host</span> <span class="string">"你可以在浏览器里面打开 http://localhost:4000/ 看下是否正常启动"</span></span><br><span class="line">		<span class="built_in">read-host</span> <span class="string">"当你确定完了,请按Enter键继续安装主题, powershell会暂时结束node进程"</span></span><br><span class="line">		ps node -ea <span class="number">4</span>|kill -force</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">write-error</span> <span class="string">"nodejs service stated with failure:"</span></span><br><span class="line">		<span class="variable">$hexo_validate</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;Catch&#123;</span><br><span class="line">	<span class="variable">$_</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>细心的小伙伴可能发现了我在启动service那块使用的是<code>start hexo -ArgumentList &#39;s&#39;</code>而不是<code>hexo s</code>, 因为我发现在powershell中<code>Ctrl+C</code>停止service的时候,不会出现下面这种CMD会出现的<code>终止批处理操作吗(Y/N)?</code>,最终会导致powershell一直卡在那里.所以这里用了这么个方法开了个新的窗口.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zn91o1obj30fs02kq2q.jpg"><br><div>8-停止服务</div></center>


<h3 id="添加分类-标签-关于"><a href="#添加分类-标签-关于" class="headerlink" title="添加分类/标签/关于"></a>添加分类/标签/关于</h3><p>确认好基本的博客没问题后,我们开始添加些额外的组件. 这一部分参考了这篇文章.<a href="https://www.jianshu.com/p/e17711e44e00" target="_blank" rel="noopener">Hexo使用攻略-添加分类及标签</a></p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5zn3j7lzvj30iz05kdge.jpg"><br><div>9-hexo基础组件</div></center>

<h4 id="添加分类"><a href="#添加分类" class="headerlink" title="添加分类"></a>添加分类</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure>

<p>这条命令会生成一个文件<code>$hexo_folder\source\categories\index.md</code>. 手动安装时我们只要确保<code>type: &quot;categories&quot;</code>这一行放在下面那个位置就行了,以后都不用再碰这个文件了.</p>
<p><strong>需要注意的是针对hexo相关配置文件的更改,冒号后面一定要有空格.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2019-07-29 22:29:52</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h4 id="添加标签"><a href="#添加标签" class="headerlink" title="添加标签"></a>添加标签</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>

<p>同理这条命令也会生成一个文件<code>$hexo_folder\source\tags\index.md</code>. 手动安装时我们只要确保<code>type: &quot;tags&quot;</code>这一行放在下面那个位置就行了,以后都不用再碰这个文件了.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2019-07-29 22:31:14</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h4 id="添加关于"><a href="#添加关于" class="headerlink" title="添加关于"></a>添加关于</h4><p>关于是一个单独的页面,用来简单的介绍下你自己.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page about</span><br></pre></td></tr></table></figure>

<p>这条命令会生成一个文件<code>$hexo_folder\source\about\index.md</code>. 你可以在里面使用markdown语法写上介绍你自己的内容. 注意前4行不用动.</p>
<p>上面3个简单的用powershell包装一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#&lt;---------------------------------------------------- 10. 创建“分类”(categories)选项</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to add &amp; edit categories..."</span></span><br><span class="line">hexo new page categories</span><br><span class="line"></span><br><span class="line"><span class="variable">$categories_md</span> = <span class="string">"<span class="variable">$hexo_folder</span>\source\categories\index.md"</span></span><br><span class="line">(cat <span class="variable">$categories_md</span> -Encoding UTF8) |select -First <span class="number">3</span> | <span class="built_in">Out-File</span> <span class="variable">$categories_md</span> -Encoding utf8</span><br><span class="line"><span class="string">@"</span></span><br><span class="line"><span class="string">type: "categories"</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">"@</span> | <span class="built_in">Out-File</span> <span class="variable">$categories_md</span> -Encoding utf8 -Append</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 11. 创建“标签”(tags)选项</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to add &amp; edit tags..."</span></span><br><span class="line"></span><br><span class="line">hexo new page tags</span><br><span class="line"><span class="variable">$tags_md</span> = <span class="string">"<span class="variable">$hexo_folder</span>\source\tags\index.md"</span></span><br><span class="line">(cat <span class="variable">$tags_md</span> -Encoding UTF8) |select -First <span class="number">3</span> | <span class="built_in">Out-File</span> <span class="variable">$tags_md</span> -Encoding utf8</span><br><span class="line"><span class="string">@"</span></span><br><span class="line"><span class="string">type: "tags"</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">"@</span> | <span class="built_in">Out-File</span> <span class="variable">$tags_md</span> -Encoding utf8 -Append</span><br><span class="line"></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Update hello-world.md with tags &amp; categories..."</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$demo</span> = cat <span class="string">"<span class="variable">$hexo_folder</span>\source\_posts\hello-world.md"</span> -Encoding utf8</span><br><span class="line"><span class="variable">$demo</span>[<span class="number">2</span>] = (<span class="string">"date: &#123;0:yyyy-MM-dd HH:mm:ss&#125;</span></span><br><span class="line"><span class="string">tags: test-tag</span></span><br><span class="line"><span class="string">categories: test-category</span></span><br><span class="line"><span class="string">"</span> -f (<span class="built_in">get-date</span>)) + <span class="variable">$demo</span>[<span class="number">2</span>]</span><br><span class="line"><span class="variable">$demo</span>| <span class="built_in">Out-File</span> <span class="string">"<span class="variable">$hexo_folder</span>\source\_posts\hello-world.md"</span> -Encoding utf8</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 12. 创建“关于”(about)选项</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to add &amp; edit tags..."</span></span><br><span class="line">hexo new page about</span><br><span class="line"><span class="string">"This is where you introduce yourself, please use markdown language to edit this file, do not touch the first 4 line of contents"</span>| <span class="built_in">Out-File</span> <span class="string">"<span class="variable">$hexo_folder</span>\source\about\index.md"</span> -Encoding utf8 -Append</span><br></pre></td></tr></table></figure>

<h3 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h3><p>hexo默认使用的是<code>landscape</code>主题,如果使用别的主题就要额外下载. 因为我的博客使用的是<code>Fan</code>主题,这个主题还有2个依赖包. 下载好主题后,手动情况下,需要更改主folder下的<code>_config.yml</code>,找到<code>theme: landscape</code>那一行,改为<code>theme: Fan</code>; 同时还要找到Fan主题下的”$hexo_folder\themes\Fan_config.yml”文件,找到<code>algolia_search</code>,把它下面那一行的<code>enable: true</code>改为<code>enable: false</code>,这是因为我们还没有安装<code>algolia</code>,不把它disable的话,编译不通过.</p>
<p>自动化安装步骤如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#&lt;---------------------------------------------------- 13. 安装主题</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install theme 'Fan', please wait a while..."</span></span><br><span class="line">git clone <span class="string">'https://github.com/fan-lv/Fan.git'</span> themes/Fan <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install Fan theme dependency packge, please wait a while..."</span></span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 13.1 下面2个是主题的依赖包</span></span><br><span class="line">cnpm install hexo-renderer-stylus --save <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">cnpm install hexo-renderer-jade --save <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to edit main &amp; theme _config.yml..."</span></span><br><span class="line">(cat <span class="string">"<span class="variable">$hexo_folder</span>\_config.yml"</span> -Encoding UTF8).replace(<span class="string">"landscape"</span>,<span class="string">"Fan"</span>)| <span class="built_in">Out-File</span> <span class="string">"<span class="variable">$hexo_folder</span>\_config.yml"</span> -Encoding utf8</span><br><span class="line">(cat <span class="string">"<span class="variable">$hexo_folder</span>\themes\Fan\_config.yml"</span> -Encoding UTF8 -Raw) <span class="nomarkup">-replace</span>(<span class="string">"(?ms)algolia_search:`r`n  enable: true"</span>,<span class="string">"algolia_search:`r`n  enable: false"</span>) |<span class="built_in">Out-File</span> <span class="string">"<span class="variable">$hexo_folder</span>\themes\Fan\_config.yml"</span> -Encoding utf8</span><br></pre></td></tr></table></figure>

<h3 id="安装看板娘"><a href="#安装看板娘" class="headerlink" title="安装看板娘"></a>安装看板娘</h3><p>就是这个萌妹子啦 O(∩_∩)O哈哈~</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g5znq47cqjj30py08l77y.jpg"><br><div>10-hexo看板娘</div></center>

<p>不过说实在的,这块我是有点懵圈的.因为我最开始迁移到hexo的时候安装看板娘的步骤很繁琐,而且之前默认的是一只可爱的小狗. 这2天准备这个博客的时候, 在虚拟机上装的时候就很容易了,默认的还变成了这个卡通妹子.估计hexo更新了咋地吧.</p>
<p>步骤简单了也方便咱脚本编辑, 自动化安装步骤如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#&lt;---------------------------------------------------- 14. 添加看板娘工具</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Start to install live2d, please wait a while..."</span></span><br><span class="line">cnpm install hexo-helper-live2d --save <span class="number">1</span>&gt;&gt;<span class="variable">$log</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="built_in">write-host</span> -fore Cyan <span class="string">"Re-generate hexo html files, please wait a while..."</span></span><br><span class="line">hexo clean ; hexo g</span><br><span class="line"><span class="built_in">write-host</span> -fore yellow <span class="string">"All script finished, please check in your browser"</span></span><br><span class="line">start cmd -ArgumentList <span class="string">"/c `"hexo s`""</span></span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 14.1. 验证本地服务是否正常起来</span></span><br><span class="line"><span class="keyword">Try</span>&#123;</span><br><span class="line">	sleep <span class="number">10</span></span><br><span class="line">	<span class="variable">$hexo_validate</span> =<span class="built_in">Invoke-WebRequest</span> <span class="string">"http://localhost:4000/"</span> -Method Head -UseBasicParsing -ea <span class="number">4</span></span><br><span class="line">	<span class="keyword">If</span>( <span class="variable">$hexo_validate</span>.StatusCode <span class="nomarkup">-eq</span> <span class="number">200</span> )&#123;</span><br><span class="line">		<span class="built_in">read-host</span> <span class="string">"你可以在浏览器里面打开 http://localhost:4000/ 看下是否正常启动"</span></span><br><span class="line">		<span class="built_in">read-host</span> <span class="string">"当你确定完了,请按Enter键继续安装git插件, powershell会暂时结束node进程"</span></span><br><span class="line">		ps node -ea <span class="number">4</span>|kill -force</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">write-error</span> <span class="string">"nodejs service stated with failure:"</span></span><br><span class="line">		<span class="variable">$hexo_validate</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;Catch&#123;</span><br><span class="line">	<span class="variable">$_</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#&lt;---------------------------------------------------- 15. 安装git插件,这是一个自动部署发布工具,用于向github或者gitee推送hexo文件</span></span><br><span class="line">cnpm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h3 id="推送到码云"><a href="#推送到码云" class="headerlink" title="推送到码云"></a>推送到码云</h3><p>这一步因为涉及到个人仓库,所以没法一键自动化,我们看下手动步骤吧.</p>
<h4 id="新建私有仓库"><a href="#新建私有仓库" class="headerlink" title="新建私有仓库"></a>新建私有仓库</h4><p>首先新建一个私有仓库名字随意,但最好有意义,然后在下面这里<strong>路径后面的名字一定要和你的码云账户名字一致</strong>.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g60qkvho7xj30sb08vgm0.jpg"><br><div>11-gitee仓库设置</div></center>

<p>接着到hexo主目录下的<code>_config.yml</code>找到下面这几行,按样子repo后面改成你自己刚新建的私有仓库的地址,<strong>一定要用ssh的地址</strong>,不要用https的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">    type: git</span><br><span class="line">    repo: git@gitee.com:chaoyuew/chaoyuew.git</span><br><span class="line">    branch: master</span><br></pre></td></tr></table></figure>

<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g60qvbmx5zj30s609gq3j.jpg"><br><div>12-码云仓库地址</div></center>

<h4 id="SSH秘钥设置"><a href="#SSH秘钥设置" class="headerlink" title="SSH秘钥设置"></a>SSH秘钥设置</h4><p>这一步是为了能够使用git向码云推送文件的时候,免去输入账号的繁琐. 参考码云官方文档<a href="https://gitee.com/help/articles/4191#article-header0" target="_blank" rel="noopener">SSH 公钥设置</a></p>
<p>我们先在本地生成下一对秘钥.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"这里填上你注册码云的邮箱地址"</span></span><br></pre></td></tr></table></figure>

<p>一直按3次<code>Enter</code>就会提示你已经安装好了(我这里是因为已经生成过了,所以有个覆盖的提示,passphrase那里可以不写). 找到<code>$HOME\.ssh\id_rsa.pub</code>这个文件, 用文本编辑器打开,复制所有内容.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g61ehyrdzdj30f90ar3yj.jpg"><br><div>13-生成秘钥</div></center>

<p>去到码云账户设置,在安全设置下点击<code>SSH公钥</code>,像下面这样把刚才复制的公钥内容存储在你的账户下. 注意这一步是在你的账户下设置,不是在之前创建的私有仓库下设置,切记.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g60r9oi49mj30sv0gowff.jpg"><br><div>14-添加公钥</div></center>

<h4 id="推送hexo文件到码云并启动Gitee-Pages-服务"><a href="#推送hexo文件到码云并启动Gitee-Pages-服务" class="headerlink" title="推送hexo文件到码云并启动Gitee Pages 服务"></a>推送hexo文件到码云并启动Gitee Pages 服务</h4><p>确定好在本地调试好了之后就可以推送到码云上了,在powershell里面运行下面代码(确保powershell当前路径在hexo主目录路径下执行),会提示你输入码云的密码,确保输入无误后就上传成功了. 然后我们就到之前创建的那个私有仓库下去启动Gitee Pages.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="comment"># 清除旧文件</span></span><br><span class="line">hexo g <span class="comment"># 重新生成静态界面文件</span></span><br><span class="line">hexo d <span class="comment"># 部署到码云上</span></span><br></pre></td></tr></table></figure>

<p>详细步骤看动图.</p>
<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g61eny4x7bg30r60e8juu.gif"><br><div>15-发布hexo到码云</div></center>

<center><img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="http://ww1.sinaimg.cn/large/007tGxtGgy1g61f059gq6g30s90f3kjm.gif"><br><div>16-启动Gitee Pages</div></center>

<h3 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h3><p>有些东西像Algolia搜索,百度的SEO等等太过个人化和技术化就没介绍了,感兴趣的可以自己上网搜索下,我文末也有一些我自己找的博客的链接可以参考下.</p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>更新部分是在此文已撰写好的基础上,添加的一些额外功能,此部分不影响博客的基础功能,大家可作为课外知识来看.</p>
<h4 id="Markdown图片居中并添加标题"><a href="#Markdown图片居中并添加标题" class="headerlink" title="Markdown图片居中并添加标题"></a>Markdown图片居中并添加标题</h4><p>Markdown自身插入图片语法<code>![图片名称](图片地址)</code>是不支持图片居中,添加下标题等高级用法的.</p>
<p>我自己上网找了下(文末参考链接<a href="https://blog.csdn.net/Lincain/article/details/89892249" target="_blank" rel="noopener">Markdown 图片居中并添加标题</a>),可以使用以下CSS样式改写.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">center</span>&gt;</span><br><span class="line">    &lt;img style="border-radius: 0.3125em;</span><br><span class="line">    <span class="selector-tag">box-shadow</span>: 0 2<span class="selector-tag">px</span> 4<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(34,36,38,<span class="selector-class">.12</span>),0 2<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(34,36,38,<span class="selector-class">.08</span>);" </span><br><span class="line">    src="这里输入图片地址"&gt;</span><br><span class="line">    &lt;<span class="selector-tag">br</span>&gt;</span><br><span class="line">    &lt;div style="color:orange; border-bottom: 1px solid #d9d9d9;</span><br><span class="line">    <span class="selector-tag">display</span>: <span class="selector-tag">inline-block</span>;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-id">#999</span>;</span><br><span class="line">    padding: 2px;"&gt;这里输入题注&lt;/div&gt;</span><br><span class="line">&lt;/center&gt;</span><br></pre></td></tr></table></figure>

<p>我自己觉得代码有点冗余,缩减了下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">center</span>&gt;</span><br><span class="line">	&lt;img style="border-radius: 0.3125em;box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);</span><br><span class="line">	"src="这里输入图片地址"&gt;</span><br><span class="line">	&lt;<span class="selector-tag">br</span>&gt;</span><br><span class="line">	&lt;div&gt;这里输入题注&lt;/div&gt;</span><br><span class="line">&lt;/center&gt;</span><br></pre></td></tr></table></figure>

<p>本文所有图片都是使用此样式添加的,这里就看出来有前端开发经验的完全可以基于此写一个自己喜欢的图片插入样式.</p>
<p>完整脚本<a href="https://gitee.com/chaoyuew/powershell/blob/feature/wechat/SPPS00/Install-Hexo.ps1" target="_blank" rel="noopener">Install-Hexo.ps1</a></p>
<blockquote>
<p>参考链接<br><a href="https://caiyantao.gitee.io/2019/04/13/Hexo-%E4%B8%80/#more" target="_blank" rel="noopener">Hexo学习 (一) | 日复一日，来日方长</a><br><a href="https://www.jianshu.com/p/5014133ba61a" target="_blank" rel="noopener">使用Gitee+Hexo搭建个人博客</a><br><a href="https://www.jianshu.com/p/ca99df4071d4" target="_blank" rel="noopener">Windows基于gitee使用hexo搭建个人博客笔记</a><br><a href="https://www.jianshu.com/p/e17711e44e00" target="_blank" rel="noopener">Hexo使用攻略-添加分类及标签</a><br><a href="https://github.com/fan-lv/Fan" target="_blank" rel="noopener">Fan Theme Github</a><br><a href="https://blog.csdn.net/dataiyangu/article/details/83021854" target="_blank" rel="noopener">hexo中next主题添加里lived看板娘（会说话，会换装）</a><br><a href="https://hexo.io/docs/troubleshooting.html#Error-ENOENT-no-such-file-or-directory" target="_blank" rel="noopener">hexo Troubleshooting</a><br><a href="https://blog.csdn.net/chwshuang/article/details/52350551" target="_blank" rel="noopener">Hexo在Github中搭建博客系统(5)Markdown语法</a><br><a href="https://blog.csdn.net/Lincain/article/details/89892249" target="_blank" rel="noopener">Markdown 图片居中并添加标题</a><br><a href="https://segmentfault.com/a/1190000018803949" target="_blank" rel="noopener">Hexo+Next集成Algolia搜索</a><br><a href="https://cloud.tencent.com/developer/article/1435802" target="_blank" rel="noopener">【Hexo实战】SEO（百度、Google）设置</a></p>
</blockquote>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">超速蜗牛</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="https://chaoyuew.gitee.io/hexo-gitee-blog.html">https://chaoyuew.gitee.io/hexo-gitee-blog.html</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://chaoyuew.gitee.io">超速蜗牛的博客</a>！</span></div></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/WPS-9-Basic-Judge-Switch-Loop.html"><i class="fas fa-angle-left">&nbsp;</i><span>Windows PowerShell入门(9) 判断，跳转和循环</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/WPS-8-Basic-Pip.html"><span>Windows PowerShell入门(8) 管道 |</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2019 By 超速蜗牛</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>